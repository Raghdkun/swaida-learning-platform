import{r as u,j as e,H as X,L as p,a as n}from"./app-XCWzyg_D.js";import{A as Y,c as Z,a as $,e as ee,C as se,i as N,b as re,d as ae}from"./app-layout-VYuuSxg2.js";import{B as t}from"./createLucideIcon-DFrWijeY.js";import{I as te}from"./input-CJV-sHSj.js";import{C as g,b,c as S,a as f}from"./card-BVqkHker.js";import{B as le}from"./badge-DACOarVS.js";import{C as D}from"./checkbox-C91pgwyx.js";import{S as A,a as w,b as k,c as y,d as h}from"./select-qUYEx36n.js";import{T as ie,a as ne,b as T,c as x,d as ce,e as m}from"./table-DWOa2mb6.js";import{A as _,a as B,b as z,c as H,d as E,e as L,f as P,g as F,h as I}from"./alert-dialog-C4N-3duH.js";import{P as oe}from"./plus-WKioG1_P.js";import{S as de}from"./search-DIo_lF2b.js";import{T as R}from"./trash-2-D8mhwF3d.js";import{E as he}from"./eye-CcwqnjoE.js";import{S as xe}from"./square-pen-DIXm4Jgo.js";import{C as me}from"./chevron-left-x9wACiTp.js";/* empty css            */import"./index-Deh3jF4w.js";import"./dropdown-menu-D4CvIBbD.js";import"./index-BuDJYdP8.js";import"./index-BRZr46A0.js";import"./app-logo-icon-C1vkD9NY.js";import"./index-CMWG4mbA.js";import"./log-out-Bm0qt3af.js";import"./trending-up-CnV6C5VB.js";import"./index-CW6f19fI.js";import"./check-BydVkFPn.js";const ue=[{title:"Dashboard",href:"/dashboard"},{title:"Categories",href:"/dashboard/categories"}];function qe({categories:C,filters:V}){const r=C||{data:[],links:{prev:null,next:null}};Array.isArray(r.data)||(r.data=[]);const i=V||{search:"",sort:"name",direction:"asc"},[a,c]=u.useState([]),[j,M]=u.useState(typeof i.search=="string"?i.search:""),[o,q]=u.useState(typeof i.sort=="string"?i.sort:"name"),[d,G]=u.useState(typeof i.direction=="string"?i.direction:"asc"),J=s=>{s.preventDefault(),n.get(N.url({search:j,sort:o,direction:d}),{},{preserveState:!0})},v=s=>{const l=o===s&&d==="asc"?"desc":"asc";n.get(N.url({search:j,sort:s,direction:l}),{},{preserveState:!0})},K=s=>{s&&r.data&&Array.isArray(r.data)?c(r.data.map(l=>l.id)):c([])},O=(s,l)=>{c(l?[...a,s]:a.filter(W=>W!==s))},Q=()=>{n.delete(re.url(),{data:{ids:a},onSuccess:()=>c([])})},U=s=>{n.delete(ae.url(s))};return e.jsxs(Y,{breadcrumbs:ue,children:[e.jsx(X,{title:"Categories Management"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Categories"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage course categories"})]}),e.jsx(p,{href:Z.url(),children:e.jsxs(t,{children:[e.jsx(oe,{className:"mr-2 h-4 w-4"}),"Add Category"]})})]}),e.jsxs(g,{children:[e.jsx(b,{children:e.jsx(S,{children:"Filters"})}),e.jsx(f,{children:e.jsxs("form",{onSubmit:J,className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(te,{placeholder:"Search categories...",value:j,onChange:s=>M(s.target.value),className:"max-w-sm"})}),e.jsxs(A,{value:o,onValueChange:q,children:[e.jsx(w,{className:"w-[180px]",children:e.jsx(k,{placeholder:"Sort by"})}),e.jsxs(y,{children:[e.jsx(h,{value:"name",children:"Name"}),e.jsx(h,{value:"courses_count",children:"Courses Count"}),e.jsx(h,{value:"created_at",children:"Created Date"})]})]}),e.jsxs(A,{value:d,onValueChange:G,children:[e.jsx(w,{className:"w-[120px]",children:e.jsx(k,{placeholder:"Direction"})}),e.jsxs(y,{children:[e.jsx(h,{value:"asc",children:"Ascending"}),e.jsx(h,{value:"desc",children:"Descending"})]})]}),e.jsxs(t,{type:"submit",children:[e.jsx(de,{className:"mr-2 h-4 w-4"}),"Search"]})]})})]}),a.length>0&&e.jsx(g,{children:e.jsx(f,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:[a.length," categor",a.length===1?"y":"ies"," selected"]}),e.jsxs(_,{children:[e.jsx(B,{asChild:!0,children:e.jsxs(t,{variant:"destructive",size:"sm",children:[e.jsx(R,{className:"mr-2 h-4 w-4"}),"Delete Selected"]})}),e.jsxs(z,{children:[e.jsxs(H,{children:[e.jsx(E,{children:"Are you sure?"}),e.jsx(L,{children:"This action cannot be undone. This will permanently delete the selected categories."})]}),e.jsxs(P,{children:[e.jsx(F,{children:"Cancel"}),e.jsx(I,{onClick:Q,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Categories"})]})]})]})]})})}),e.jsxs(g,{children:[e.jsx(b,{children:e.jsxs(S,{children:["Categories (",C?.total||0,")"]})}),e.jsxs(f,{children:[e.jsxs(ie,{children:[e.jsx(ne,{children:e.jsxs(T,{children:[e.jsx(x,{className:"w-12",children:e.jsx(D,{checked:a.length===(r.data?.length||0)&&(r.data?.length||0)>0,onCheckedChange:K})}),e.jsxs(x,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>v("name"),children:["Name",o==="name"&&e.jsx("span",{className:"ml-1",children:d==="asc"?"↑":"↓"})]}),e.jsx(x,{children:"Slug"}),e.jsxs(x,{className:"cursor-pointer hover:bg-muted/50",onClick:()=>v("courses_count"),children:["Courses",o==="courses_count"&&e.jsx("span",{className:"ml-1",children:d==="asc"?"↑":"↓"})]}),e.jsx(x,{className:"text-right",children:"Actions"})]})}),e.jsx(ce,{children:r.data?.map(s=>e.jsxs(T,{children:[e.jsx(m,{children:e.jsx(D,{checked:a.includes(s.id),onCheckedChange:l=>O(s.id,l)})}),e.jsx(m,{className:"font-medium",children:s.name}),e.jsx(m,{children:e.jsx("code",{className:"text-sm bg-muted px-1 py-0.5 rounded",children:s.slug})}),e.jsx(m,{children:e.jsx(le,{variant:"secondary",children:s.courses_count})}),e.jsx(m,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(p,{href:$.url(s.id),children:e.jsx(t,{variant:"outline",size:"sm",children:e.jsx(he,{className:"h-4 w-4"})})}),e.jsx(p,{href:ee.url(s.id),children:e.jsx(t,{variant:"outline",size:"sm",children:e.jsx(xe,{className:"h-4 w-4"})})}),e.jsxs(_,{children:[e.jsx(B,{asChild:!0,children:e.jsx(t,{variant:"outline",size:"sm",children:e.jsx(R,{className:"h-4 w-4"})})}),e.jsxs(z,{children:[e.jsxs(H,{children:[e.jsx(E,{children:"Are you sure?"}),e.jsxs(L,{children:['This action cannot be undone. This will permanently delete the category "',s.name,'".',s.courses_count>0&&e.jsxs("span",{className:"block mt-2 font-medium text-destructive",children:["This category has ",s.courses_count," associated course",s.courses_count!==1?"s":"","."]})]})]}),e.jsxs(P,{children:[e.jsx(F,{children:"Cancel"}),e.jsx(I,{onClick:()=>U(s.id),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Delete Category"})]})]})]})]})})]},s.id))})]}),(r.data?.length||0)===0&&e.jsx("div",{className:"text-center py-8",children:e.jsx("p",{className:"text-muted-foreground",children:"No categories found."})})]})]}),r.last_page&&r.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Showing ",r.from||0," to"," ",r.to||0," of"," ",r.total||0," results"]}),e.jsxs("div",{className:"flex gap-2",children:[r.links?.prev&&e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>n.get(r.links.prev),children:[e.jsx(me,{className:"h-4 w-4"}),"Previous"]}),r.links?.next&&e.jsxs(t,{variant:"outline",size:"sm",onClick:()=>n.get(r.links.next),children:["Next",e.jsx(se,{className:"h-4 w-4"})]})]})]})]})]})}export{qe as default};
