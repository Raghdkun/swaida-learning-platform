import{r as f,u as P,j as e,H as $,L as N}from"./app-XCWzyg_D.js";import{A as G,j as I}from"./app-layout-VYuuSxg2.js";import{B as h}from"./createLucideIcon-DFrWijeY.js";import{I as d}from"./input-CJV-sHSj.js";import{L as l}from"./label-Cgm13X_Z.js";import{T as _}from"./textarea-BK9FJMUZ.js";import{S as b,a as C,b as y,c as S,d as F}from"./select-qUYEx36n.js";import{C as w}from"./checkbox-C91pgwyx.js";import{C as m,b as p,c as u,a as x}from"./card-BVqkHker.js";import{B as U}from"./badge-DACOarVS.js";import{A as V}from"./arrow-left-CIsWAMjJ.js";import{X as H}from"./dropdown-menu-D4CvIBbD.js";import{S as z}from"./save-DoCnfFxW.js";/* empty css            */import"./index-Deh3jF4w.js";import"./index-BuDJYdP8.js";import"./index-BRZr46A0.js";import"./app-logo-icon-C1vkD9NY.js";import"./index-CMWG4mbA.js";import"./log-out-Bm0qt3af.js";import"./trending-up-CnV6C5VB.js";import"./index-CW6f19fI.js";import"./check-BydVkFPn.js";const J=[{value:"beginner",label:"Beginner"},{value:"intermediate",label:"Intermediate"},{value:"advanced",label:"Advanced"}];function he({course:r,categories:T,tags:v}){const[n,j]=f.useState(r.tags.map(a=>a.id)),k=[{title:"Dashboard",href:"/dashboard"},{title:"Courses",href:"/dashboard/courses"},{title:r.title,href:`/dashboard/courses/${r.id}`},{title:"Edit",href:`/dashboard/courses/${r.id}/edit`}],{data:i,setData:t,post:L,processing:g,errors:s}=P({title:r.title,description:r.description,external_url:r.external_url,duration:r.duration||"",platform:r.platform,image:null,category_id:r.category.id.toString(),level:r.level,have_cert:r.have_cert,tags:r.tags.map(a=>a.id),price:r.price?.toString()||"",title_ar:r.title_ar||"",description_ar:r.description_ar||"",platform_ar:r.platform_ar||"",level_ar:r.level_ar||""});f.useEffect(()=>{t("tags",n)},[n]);const E=a=>{a.preventDefault(),L(I.url(r.id),{data:{...i,tags:n},forceFormData:!0})},A=a=>{j(c=>c.includes(a)?c.filter(D=>D!==a):[...c,a])},B=a=>{j(c=>c.filter(o=>o!==a))};return e.jsxs(G,{breadcrumbs:k,children:[e.jsx($,{title:`Edit ${r.title}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(N,{href:"/dashboard/courses",children:e.jsxs(h,{variant:"outline",size:"sm",children:[e.jsx(V,{className:"mr-2 h-4 w-4"}),"Back to Courses"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Course"}),e.jsx("p",{className:"text-muted-foreground",children:"Update course information"})]})]}),e.jsx("form",{onSubmit:E,className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(m,{children:[e.jsx(p,{children:e.jsx(u,{children:"Basic Information"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"title",children:"Course Title *"}),e.jsx(d,{id:"title",value:i.title,onChange:a=>t("title",a.target.value),placeholder:"Enter course title",className:s.title?"border-destructive":""}),s.title&&e.jsx("p",{className:"text-sm text-destructive",children:s.title})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"title_ar",children:"Course Title (Arabic) — optional"}),e.jsx(d,{id:"title_ar",dir:"rtl",value:i.title_ar||"",onChange:a=>t("title_ar",a.target.value),placeholder:"[translate:عنوان الدورة باللغة العربية]"}),s.title_ar&&e.jsx("p",{className:"text-sm text-destructive",children:s.title_ar})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description",children:"Description *"}),e.jsx(_,{id:"description",value:i.description,onChange:a=>t("description",a.target.value),placeholder:"Enter course description",rows:4,className:s.description?"border-destructive":""}),s.description&&e.jsx("p",{className:"text-sm text-destructive",children:s.description})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"description_ar",children:"Description (Arabic) — optional"}),e.jsx(_,{id:"description_ar",dir:"rtl",rows:4,value:i.description_ar||"",onChange:a=>t("description_ar",a.target.value),placeholder:"[translate:وصف الدورة باللغة العربية]"}),s.description_ar&&e.jsx("p",{className:"text-sm text-destructive",children:s.description_ar})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"external_url",children:"Course URL *"}),e.jsx(d,{id:"external_url",type:"url",value:i.external_url,onChange:a=>t("external_url",a.target.value),placeholder:"https://example.com/course",className:s.external_url?"border-destructive":""}),s.external_url&&e.jsx("p",{className:"text-sm text-destructive",children:s.external_url})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"platform",children:"Platform *"}),e.jsx(d,{id:"platform",value:i.platform,onChange:a=>t("platform",a.target.value),placeholder:"e.g., Udemy, Coursera",className:s.platform?"border-destructive":""}),s.platform&&e.jsx("p",{className:"text-sm text-destructive",children:s.platform})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"platform_ar",children:"Platform (Arabic) — optional"}),e.jsx(d,{id:"platform_ar",dir:"rtl",value:i.platform_ar||"",onChange:a=>t("platform_ar",a.target.value),placeholder:"[translate:المنصة]"}),s.platform_ar&&e.jsx("p",{className:"text-sm text-destructive",children:s.platform_ar})]})]}),e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"duration",children:"Duration"}),e.jsx(d,{id:"duration",value:i.duration,onChange:a=>t("duration",a.target.value),placeholder:"e.g., 10 hours, 5 weeks",className:s.duration?"border-destructive":""}),s.duration&&e.jsx("p",{className:"text-sm text-destructive",children:s.duration})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"level_ar",children:"Level (Arabic) — optional"}),e.jsx(d,{id:"level_ar",dir:"rtl",value:i.level_ar||"",onChange:a=>t("level_ar",a.target.value),placeholder:"[translate:المستوى]"}),s.level_ar&&e.jsx("p",{className:"text-sm text-destructive",children:s.level_ar})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"price",children:"Price"}),e.jsx(d,{id:"price",type:"number",step:"0.01",min:"0",value:i.price,onChange:a=>t("price",a.target.value),placeholder:"0.00",className:s.price?"border-destructive":""}),s.price&&e.jsx("p",{className:"text-sm text-destructive",children:s.price}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Leave empty or set to 0 for free courses."})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"image",children:"Course Image"}),r?.image||r?.image_url?e.jsxs("div",{className:"mb-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Current image:"}),e.jsx("img",{src:r.image?`/storage/${r.image}`:r.image_url||"",alt:"Current course image",className:"w-32 h-20 object-cover rounded border"})]}):null,e.jsx(d,{id:"image",type:"file",accept:"image/*",onChange:a=>t("image",a.target.files?.[0]||null),className:s.image?"border-destructive":""}),s.image&&e.jsx("p",{className:"text-sm text-destructive",children:s.image}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Supported formats: JPEG, PNG, JPG, GIF, SVG. Max size: 2MB. Leave empty to keep current image."})]})]})]}),e.jsxs(m,{children:[e.jsx(p,{children:e.jsx(u,{children:"Tags"})}),e.jsxs(x,{className:"space-y-4",children:[n.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2",children:n.map(a=>{const c=v.find(o=>o.id===a);return c?e.jsxs(U,{variant:"secondary",className:"gap-1",children:[c.name,e.jsx("button",{type:"button",onClick:()=>B(c.id),className:"ml-1 hover:bg-destructive hover:text-destructive-foreground rounded-full",children:e.jsx(H,{className:"h-3 w-3"})})]},c.id):null})}),e.jsx("div",{className:"grid gap-2 sm:grid-cols-2 md:grid-cols-3",children:v.map(a=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{id:`tag-${a.id}`,checked:n.includes(a.id),onCheckedChange:()=>A(a.id)}),e.jsx(l,{htmlFor:`tag-${a.id}`,className:"text-sm",children:a.name})]},a.id))})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(m,{children:[e.jsx(p,{children:e.jsx(u,{children:"Course Settings"})}),e.jsxs(x,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"category",children:"Category *"}),e.jsxs(b,{value:i.category_id,onValueChange:a=>t("category_id",a),children:[e.jsx(C,{className:s.category_id?"border-destructive":"",children:e.jsx(y,{placeholder:"Select category"})}),e.jsx(S,{children:T.map(a=>e.jsx(F,{value:a.id.toString(),children:a.name},a.id))})]}),s.category_id&&e.jsx("p",{className:"text-sm text-destructive",children:s.category_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"level",children:"Level *"}),e.jsxs(b,{value:i.level,onValueChange:a=>t("level",a),children:[e.jsx(C,{className:s.level?"border-destructive":"",children:e.jsx(y,{placeholder:"Select level"})}),e.jsx(S,{children:J.map(a=>e.jsx(F,{value:a.value,children:a.label},a.value))})]}),s.level&&e.jsx("p",{className:"text-sm text-destructive",children:s.level})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(w,{id:"have_cert",checked:i.have_cert,onCheckedChange:a=>t("have_cert",!!a)}),e.jsx(l,{htmlFor:"have_cert",children:"Offers Certificate"})]})]})]}),e.jsx(m,{children:e.jsx(x,{className:"pt-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(h,{type:"submit",className:"w-full",disabled:g,children:[e.jsx(z,{className:"mr-2 h-4 w-4"}),g?"Updating...":"Update Course"]}),e.jsx(N,{href:"/dashboard/courses",className:"block",children:e.jsx(h,{variant:"outline",className:"w-full",children:"Cancel"})})]})})})]})]})})]})]})}export{he as default};
