import{u as F,r as p,j as e,H as L,L as R}from"./app-BT-tp4DF.js";import{A as E}from"./app-layout-SZxPr5tq.js";import{B as j}from"./createLucideIcon-Bc3a1VGN.js";import{I as d}from"./input-CoW4zbpI.js";import{L as l}from"./label-BQMQOp-2.js";import{T as v}from"./textarea-DTF8MBIX.js";import{S as g,a as f,b as N,c as _,d as b}from"./select-38B6me0A.js";import{C as c,b as m,c as u,a as n}from"./card-ReTSKCj9.js";import{B as A}from"./badge-CO471l6V.js";import{A as B}from"./arrow-left-BJvEvrHh.js";import{S as I}from"./save-D9H2mrJB.js";/* empty css            */import"./index-DFtBUkQ6.js";import"./dropdown-menu-Dnb6YBGc.js";import"./index-yQFe1XQA.js";import"./index-BuKo0MI6.js";import"./app-logo-icon-C8K-elLU.js";import"./index-CMWG4mbA.js";import"./log-out-CiJBdlmn.js";import"./trending-up-AkU4lzWN.js";import"./index-iM9ANkEv.js";import"./check-C5k-a0M6.js";const $=[{value:"pending",label:"Pending"},{value:"reviewing",label:"Reviewing"},{value:"approved",label:"Approved"},{value:"rejected",label:"Rejected"},{value:"contacted",label:"Contacted"}];function re({payment:t,courses:y=[]}){const C=[{title:"Dashboard",href:"/dashboard"},{title:"Course Payments",href:"/dashboard/course-payments"},{title:`#${t.id}`,href:`/dashboard/course-payments/${t.id}`},{title:"Edit",href:`/dashboard/course-payments/${t.id}/edit`}],{data:r,setData:i,post:S,processing:x,errors:a}=F({full_name:t.full_name,phone:t.phone,email:t.email,identity_image:null,reason:t.reason,course_id:String(t.course_id),status:t.status,admin_note:t.admin_note||""}),[h,w]=p.useState(t.identity_image_url);p.useEffect(()=>{if(!r.identity_image)return;const s=r.identity_image,o=s?URL.createObjectURL(s):null;return w(o),()=>{o&&URL.revokeObjectURL(o)}},[r.identity_image]);const P=s=>{s.preventDefault(),S(`/dashboard/course-payments/${t.id}`,{forceFormData:!0})};return e.jsxs(E,{breadcrumbs:C,children:[e.jsx(L,{title:`Edit Payment #${t.id}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(R,{href:`/dashboard/course-payments/${t.id}`,children:e.jsxs(j,{variant:"outline",size:"sm",children:[e.jsx(B,{className:"mr-2 h-4 w-4"}),"Back to Payment"]})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Edit Payment Request"}),e.jsx("p",{className:"text-muted-foreground",children:"Update applicant details, status, and notes"})]})]}),e.jsx("form",{onSubmit:P,className:"space-y-6",children:e.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(c,{children:[e.jsx(m,{children:e.jsx(u,{children:"Applicant Information"})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{className:"grid gap-4 sm:grid-cols-2",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"full_name",children:"Full Name *"}),e.jsx(d,{id:"full_name",value:r.full_name||"",onChange:s=>i("full_name",s.target.value),className:a.full_name?"border-destructive":""}),a.full_name&&e.jsx("p",{className:"text-sm text-destructive",children:a.full_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"email",children:"Email *"}),e.jsx(d,{id:"email",type:"email",value:r.email||"",onChange:s=>i("email",s.target.value),className:a.email?"border-destructive":""}),a.email&&e.jsx("p",{className:"text-sm text-destructive",children:a.email})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"phone",children:"Phone *"}),e.jsx(d,{id:"phone",value:r.phone||"",onChange:s=>i("phone",s.target.value),className:a.phone?"border-destructive":""}),a.phone&&e.jsx("p",{className:"text-sm text-destructive",children:a.phone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"reason",children:"Reason *"}),e.jsx(v,{id:"reason",value:r.reason||"",onChange:s=>i("reason",s.target.value),rows:5,className:a.reason?"border-destructive":""}),a.reason&&e.jsx("p",{className:"text-sm text-destructive",children:a.reason})]})]})]}),e.jsxs(c,{children:[e.jsx(m,{children:e.jsx(u,{children:"Identity Image"})}),e.jsxs(n,{className:"space-y-3",children:[h?e.jsx("img",{src:h,alt:"Identity preview",className:"w-full max-h-[360px] object-contain rounded border"}):e.jsx("p",{className:"text-sm text-muted-foreground",children:"No image selected."}),e.jsx(d,{id:"identity_image",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",onChange:s=>i("identity_image",s.target.files?.[0]||null),className:a.identity_image?"border-destructive":""}),a.identity_image&&e.jsx("p",{className:"text-sm text-destructive",children:a.identity_image}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Supported: JPEG/JPG/PNG/WebP. Max 10MB."})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(c,{children:[e.jsx(m,{children:e.jsx(u,{children:"Request Settings"})}),e.jsxs(n,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"course_id",children:"Course *"}),e.jsxs(g,{value:r.course_id,onValueChange:s=>i("course_id",s),children:[e.jsx(f,{className:a.course_id?"border-destructive":"",children:e.jsx(N,{placeholder:t.course?.title||"Select course"})}),e.jsx(_,{children:[t.course,...y.filter(s=>s.id!==t.course_id)].filter(Boolean).map(s=>e.jsx(b,{value:String(s.id),children:s.title},s.id))})]}),a.course_id&&e.jsx("p",{className:"text-sm text-destructive",children:a.course_id})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"status",children:"Status *"}),e.jsxs(g,{value:r.status,onValueChange:s=>i("status",s),children:[e.jsx(f,{className:a.status?"border-destructive":"",children:e.jsx(N,{placeholder:"Select status"})}),e.jsx(_,{children:$.map(s=>e.jsx(b,{value:s.value,children:s.label},s.value))})]}),a.status&&e.jsx("p",{className:"text-sm text-destructive",children:a.status})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(l,{htmlFor:"admin_note",children:"Admin Note"}),e.jsx(v,{id:"admin_note",value:r.admin_note||"",onChange:s=>i("admin_note",s.target.value),rows:4})]})]})]}),e.jsx(c,{children:e.jsx(n,{className:"pt-6",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs(j,{type:"submit",className:"w-full",disabled:x,children:[e.jsx(I,{className:"mr-2 h-4 w-4"}),x?"Saving...":"Save Changes"]}),e.jsxs("div",{className:"text-center text-xs text-muted-foreground",children:["Current: ",e.jsx(A,{children:t.status})]})]})})})]})]})})]})]})}export{re as default};
