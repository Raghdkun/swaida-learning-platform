import{r as N,j as e,H as B,L as C,a as o}from"./app-ByqFfibK.js";import{A as H}from"./app-layout-DiNcl9c1.js";import{B as c}from"./createLucideIcon-1Mp7Gqdz.js";import{I as L}from"./input-BjaqlN3o.js";import{B as w}from"./badge-BQt3yToO.js";import{C as j,b as M,c as V,a as p}from"./card-BPjGKEHP.js";import{C as S}from"./checkbox-2YMfYG7o.js";import{T as $,a as z,b as y,c as n,d as O,e as i}from"./table-CzsQx4c8.js";import{S as k,a as D,b as T,c as _,d as t}from"./select-WN_IQr-R.js";import{D as U,a as G,b as J,c as h}from"./dropdown-menu-LbdkPehs.js";import{A as g,D as K}from"./dashboard-pagination-DmjKVkAB.js";import{F as Q}from"./filter-0iH0H4rR.js";import{S as W}from"./search-SgpT0bM2.js";import{T as A}from"./trash-2-_0LAIcm4.js";import{E as X}from"./ellipsis-pkzOaNy1.js";import{E as Y}from"./eye-DaV1HOb_.js";import{S as Z}from"./square-pen-uGeGiZdj.js";import{F as ee}from"./file-text-B9rZ3W7w.js";/* empty css            */import"./index-CjNSEtXh.js";import"./index-BMFy-bCL.js";import"./index-B4CgvCL3.js";import"./app-logo-icon-B1tWwHL6.js";import"./index-CMWG4mbA.js";import"./log-out-B61pjk2k.js";import"./trending-up-DcU5g1xb.js";import"./index-DvDWvjGE.js";import"./check-D1dmdbxb.js";import"./chevron-left-BubbdEk7.js";const se=[{title:"Dashboard",href:"/dashboard"},{title:"Course Payments",href:"/dashboard/course-payments"}],ae={pending:"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-300",reviewing:"bg-blue-100 text-blue-800 dark:bg-blue-900 dark:text-blue-300",approved:"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-300",rejected:"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-300",contacted:"bg-purple-100 text-purple-800 dark:bg-purple-900 dark:text-purple-300"};function Ie({payments:l,courses:E,filters:r}){const[d,m]=N.useState([]),[f,I]=N.useState(r.search||""),b=s=>{s.preventDefault(),o.get("/dashboard/course-payments",{...r,search:f},{preserveState:!0,replace:!0})},v=(s,a)=>{const u=a==="all"?void 0:a;o.get("/dashboard/course-payments",{...r,[s]:u},{preserveState:!0,replace:!0})},x=s=>{const a=r.sort===s&&r.direction==="asc"?"desc":"asc";o.get("/dashboard/course-payments",{...r,sort:s,direction:a},{preserveState:!0,replace:!0})},P=s=>{m(a=>a.includes(s)?a.filter(u=>u!==s):[...a,s])},q=()=>{m(s=>s.length===l.data.length?[]:l.data.map(a=>a.id))},F=s=>{confirm("Delete this payment request?")&&o.delete(`/dashboard/course-payments/${s}`,{preserveScroll:!0})},R=()=>{d.length&&confirm(`Delete ${d.length} payment request(s)?`)&&o.delete("/dashboard/course-payments",{data:{ids:d},preserveScroll:!0,onSuccess:()=>m([])})};return e.jsxs(H,{breadcrumbs:se,children:[e.jsx(B,{title:"Course Payments"}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 overflow-x-auto rounded-xl p-4",children:[e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Course Payment Requests"}),e.jsx("p",{className:"text-muted-foreground",children:"Review, filter, and manage payment requests"})]})}),e.jsxs(j,{children:[e.jsx(M,{children:e.jsxs(V,{className:"flex items-center gap-2",children:[e.jsx(Q,{className:"h-5 w-5"}),"Filters"]})}),e.jsxs(p,{className:"flex flex-col gap-4 md:flex-row md:items-end",children:[e.jsx("form",{onSubmit:b,className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(W,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(L,{placeholder:"Search name, email, phone, reason...",value:f,onChange:s=>I(s.target.value),className:"pl-10"})]})}),e.jsxs(k,{value:r.status||"all",onValueChange:s=>v("status",s),children:[e.jsx(D,{className:"w-[180px]",children:e.jsx(T,{placeholder:"All Statuses"})}),e.jsxs(_,{children:[e.jsx(t,{value:"all",children:"All Statuses"}),e.jsx(t,{value:"pending",children:"Pending"}),e.jsx(t,{value:"reviewing",children:"Reviewing"}),e.jsx(t,{value:"approved",children:"Approved"}),e.jsx(t,{value:"rejected",children:"Rejected"}),e.jsx(t,{value:"contacted",children:"Contacted"})]})]}),e.jsxs(k,{value:r.course_id||"all",onValueChange:s=>v("course_id",s),children:[e.jsx(D,{className:"w-[220px]",children:e.jsx(T,{placeholder:"All Courses"})}),e.jsxs(_,{children:[e.jsx(t,{value:"all",children:"All Courses"}),E.map(s=>e.jsx(t,{value:String(s.id),children:s.title},s.id))]})]}),e.jsx(c,{type:"submit",onClick:b,children:"Search"})]})]}),d.length>0&&e.jsx(j,{children:e.jsx(p,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm text-muted-foreground",children:[d.length," selected"]}),e.jsxs(c,{variant:"destructive",size:"sm",onClick:R,children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Delete Selected"]})]})})}),e.jsx(j,{children:e.jsxs(p,{className:"p-0",children:[e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(y,{children:[e.jsx(n,{className:"w-12",children:e.jsx(S,{checked:d.length===l.data.length&&l.data.length>0,onCheckedChange:q})}),e.jsx(n,{children:e.jsxs(c,{variant:"ghost",onClick:()=>x("full_name"),className:"h-auto p-0 font-semibold",children:["Applicant",e.jsx(g,{className:"ml-2 h-4 w-4"})]})}),e.jsx(n,{children:"Course"}),e.jsx(n,{children:"Email / Phone"}),e.jsx(n,{children:e.jsxs(c,{variant:"ghost",onClick:()=>x("status"),className:"h-auto p-0 font-semibold",children:["Status",e.jsx(g,{className:"ml-2 h-4 w-4"})]})}),e.jsx(n,{children:e.jsxs(c,{variant:"ghost",onClick:()=>x("created_at"),className:"h-auto p-0 font-semibold",children:["Submitted",e.jsx(g,{className:"ml-2 h-4 w-4"})]})}),e.jsx(n,{className:"w-12"})]})}),e.jsx(O,{children:l.data.map(s=>e.jsxs(y,{children:[e.jsx(i,{children:e.jsx(S,{checked:d.includes(s.id),onCheckedChange:()=>P(s.id)})}),e.jsxs(i,{children:[e.jsx("div",{className:"font-medium",children:s.full_name}),e.jsx("div",{className:"text-xs text-muted-foreground line-clamp-2",children:s.reason})]}),e.jsx(i,{children:e.jsx(w,{variant:"outline",children:s.course?.title})}),e.jsxs(i,{children:[e.jsx("div",{className:"text-sm",children:s.email}),e.jsx("div",{className:"text-xs text-muted-foreground",children:s.phone})]}),e.jsx(i,{children:e.jsx(w,{className:ae[s.status],children:s.status})}),e.jsx(i,{children:new Date(s.created_at).toLocaleString()}),e.jsx(i,{children:e.jsxs(U,{children:[e.jsx(G,{asChild:!0,children:e.jsx(c,{variant:"ghost",size:"sm",children:e.jsx(X,{className:"h-4 w-4"})})}),e.jsxs(J,{align:"end",children:[e.jsx(h,{asChild:!0,children:e.jsxs(C,{href:`/dashboard/course-payments/${s.id}`,children:[e.jsx(Y,{className:"mr-2 h-4 w-4"}),"View"]})}),e.jsx(h,{asChild:!0,children:e.jsxs(C,{href:`/dashboard/course-payments/${s.id}/edit`,children:[e.jsx(Z,{className:"mr-2 h-4 w-4"}),"Edit"]})}),e.jsx(h,{asChild:!0,children:s.identity_image_url?e.jsxs("a",{href:s.identity_image_url,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(ee,{className:"mr-2 h-4 w-4"}),"Identity Image"]}):e.jsx("div",{className:"text-muted-foreground",children:"No Image"})}),e.jsxs(h,{className:"text-destructive",onClick:()=>F(s.id),children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"Delete"]})]})]})})]},s.id))})]}),l.data.length===0&&e.jsx("div",{className:"py-12 text-center text-muted-foreground",children:"No payment requests found."})]})}),e.jsx(K,{data:l})]})]})}export{Ie as default};
